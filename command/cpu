
module.exports.run = async (Discord, client, message, args) =>{

if(message.author.id !== '446738422346809354') //make the bot reply only to the owenr
  const os = require('os');
  const NUMBER_OF_CPUS = os.cpus().length;
  let startTime  = process.hrtime()
  let startUsage = process.cpuUsage()
  
  setTimeout(() => {
    // spin the CPU for 1000 milliseconds
    var now = Date.now()
    while (Date.now() - now < 1000);
  
    const newTime = process.hrtime();
    const newUsage = process.cpuUsage();
    const elapTime = process.hrtime(startTime)
    const elapUsage = process.cpuUsage(startUsage)
    startUsage = newUsage;
    startTime = newTime;
  
  
    const elapTimeMS = hrtimeToMS(elapTime)
  
    const elapUserMS = elapUsage.user / 1000; // microseconds to milliseconds
    const elapSystMS = elapUsage.system / 1000;
    const cpuPercent = (100 * (elapUserMS + elapSystMS) / elapTimeMS / NUMBER_OF_CPUS).toFixed(1) + '%'
  
    console.log('elapsed time ms:  ', elapTimeMS)
    console.log('elapsed user ms:  ', elapUserMS)
    console.log('elapsed system ms:', elapSystMS)
    console.log('cpu percent:      ', cpuPercent)
    
    let embed = new Discord.RichEmbed()
    
    .setColor('RANDOM')
    .addField('elapsed time ms: ', elapTimeMS, True)
    .addField('cpu percent:  ', cpuPercent, True)
    return message.channel.send(embed);
  
  }, 1000);
  
  function hrtimeToMS (hrtime) {
    return hrtime[0] * 1000 + hrtime[1] / 1000000
  }
  //in case setTimeout can be replace by setInterval but make sure the bot won't send messages 
  //cause it will refresh the cpu every 1000 millisecond
  }
